(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44618,(e,r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},54902,(e,r,s)=>{r.exports=e.r(66659)},30601,e=>{"use strict";var r=e.i(93033),s=e.i(12065),a=e.i(90420),t=e.i(8964),n=e.i(54902),i=e.i(11804),o=e.i(77926),l=e.i(90235),d=e.i(67881),c=e.i(70065),m=e.i(23750),u=e.i(74946),x=e.i(93746);function h(){let e=(0,n.useRouter)(),h=(0,n.useSearchParams)().get("token"),[f,j]=(0,s.useState)(!1),[p,w]=(0,s.useState)(null),y=(0,a.useForm)({resolver:(0,t.zodResolver)(x.resetPasswordSchema),defaultValues:{password:"",confirmPassword:""}});async function g(r){if(h){j(!0);try{let s=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:h,password:r.password})}),a=await s.json();if(!s.ok)return void l.toast.error(a.error||"Failed to reset password");l.toast.success("Password reset successful!"),e.push("/login")}catch(e){l.toast.error("An error occurred. Please try again.")}finally{j(!1)}}}return((0,s.useEffect)(()=>{h?async function(){try{let e=await fetch(`/api/auth/verify-reset-token?token=${h}`);w(e.ok)}catch(e){w(!1)}}():w(!1)},[h]),null===p)?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:(0,r.jsx)(c.Card,{className:"w-full max-w-md",children:(0,r.jsx)(c.CardContent,{className:"flex items-center justify-center p-6",children:(0,r.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})})}):!1===p?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:(0,r.jsxs)(c.Card,{className:"w-full max-w-md",children:[(0,r.jsxs)(c.CardHeader,{className:"space-y-1",children:[(0,r.jsx)(c.CardTitle,{className:"text-2xl font-bold text-center",children:"Invalid Link"}),(0,r.jsx)(c.CardDescription,{className:"text-center",children:"This password reset link is invalid or has expired."})]}),(0,r.jsx)(c.CardContent,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(d.Button,{asChild:!0,className:"w-full",children:(0,r.jsx)(i.default,{href:"/forgot-password",children:"Request New Link"})}),(0,r.jsx)(d.Button,{asChild:!0,variant:"outline",className:"w-full",children:(0,r.jsx)(i.default,{href:"/login",children:"Back to Login"})})]})})]})}):(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:(0,r.jsxs)(c.Card,{className:"w-full max-w-md",children:[(0,r.jsxs)(c.CardHeader,{className:"space-y-1",children:[(0,r.jsx)(c.CardTitle,{className:"text-2xl font-bold text-center",children:"Reset Password"}),(0,r.jsx)(c.CardDescription,{className:"text-center",children:"Enter your new password below"})]}),(0,r.jsx)(c.CardContent,{children:(0,r.jsx)(u.Form,{...y,children:(0,r.jsxs)("form",{onSubmit:y.handleSubmit(g),className:"space-y-4",children:[(0,r.jsx)(u.FormField,{control:y.control,name:"password",render:({field:e})=>(0,r.jsxs)(u.FormItem,{children:[(0,r.jsx)(u.FormLabel,{children:"New Password"}),(0,r.jsx)(u.FormControl,{children:(0,r.jsx)(m.Input,{type:"password",placeholder:"••••••••",...e,disabled:f})}),(0,r.jsx)(u.FormMessage,{})]})}),(0,r.jsx)(u.FormField,{control:y.control,name:"confirmPassword",render:({field:e})=>(0,r.jsxs)(u.FormItem,{children:[(0,r.jsx)(u.FormLabel,{children:"Confirm Password"}),(0,r.jsx)(u.FormControl,{children:(0,r.jsx)(m.Input,{type:"password",placeholder:"••••••••",...e,disabled:f})}),(0,r.jsx)(u.FormMessage,{})]})}),(0,r.jsxs)(d.Button,{type:"submit",className:"w-full",disabled:f,children:[f&&(0,r.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Reset Password"]})]})})})]})})}function f(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:(0,r.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),children:(0,r.jsx)(h,{})})}e.s(["default",()=>f])}]);