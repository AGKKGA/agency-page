{"version":3,"sources":["../../../../node_modules/.pnpm/next%4016.1.6_%40babel%2Bcore%407.2_9d8d1bf7a8807769963b5151bd760c41/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/.pnpm/next%4016.1.6_%40babel%2Bcore%407.2_9d8d1bf7a8807769963b5151bd760c41/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/.pnpm/next%4016.1.6_%40babel%2Bcore%407.2_9d8d1bf7a8807769963b5151bd760c41/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/.pnpm/next%4016.1.6_%40babel%2Bcore%407.2_9d8d1bf7a8807769963b5151bd760c41/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../app/reset-password/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\";\r\n\r\nimport { useState, useEffect, Suspense } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { Loader2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { resetPasswordSchema, type ResetPasswordFormData } from \"@/lib/validations/auth\";\r\n\r\nfunction ResetPasswordForm() {\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n    const token = searchParams.get(\"token\");\r\n\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isValidToken, setIsValidToken] = useState<boolean | null>(null);\r\n\r\n    const form = useForm<ResetPasswordFormData>({\r\n        resolver: zodResolver(resetPasswordSchema),\r\n        defaultValues: {\r\n            password: \"\",\r\n            confirmPassword: \"\",\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (!token) {\r\n            setIsValidToken(false);\r\n            return;\r\n        }\r\n\r\n        async function verifyToken() {\r\n            try {\r\n                const response = await fetch(`/api/auth/verify-reset-token?token=${token}`);\r\n                setIsValidToken(response.ok);\r\n            } catch (error) {\r\n                setIsValidToken(false);\r\n            }\r\n        }\r\n\r\n        verifyToken();\r\n    }, [token]);\r\n\r\n    async function onSubmit(data: ResetPasswordFormData) {\r\n        if (!token) return;\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const response = await fetch(\"/api/auth/reset-password\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ token, password: data.password }),\r\n            });\r\n\r\n            const result = await response.json();\r\n\r\n            if (!response.ok) {\r\n                toast.error(result.error || \"Failed to reset password\");\r\n                return;\r\n            }\r\n\r\n            toast.success(\"Password reset successful!\");\r\n            router.push(\"/login\");\r\n        } catch (error) {\r\n            toast.error(\"An error occurred. Please try again.\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }\r\n\r\n    if (isValidToken === null) {\r\n        return (\r\n            <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4\">\r\n                <Card className=\"w-full max-w-md\">\r\n                    <CardContent className=\"flex items-center justify-center p-6\">\r\n                        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (isValidToken === false) {\r\n        return (\r\n            <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4\">\r\n                <Card className=\"w-full max-w-md\">\r\n                    <CardHeader className=\"space-y-1\">\r\n                        <CardTitle className=\"text-2xl font-bold text-center\">Invalid Link</CardTitle>\r\n                        <CardDescription className=\"text-center\">\r\n                            This password reset link is invalid or has expired.\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n                        <div className=\"flex flex-col gap-2\">\r\n                            <Button asChild className=\"w-full\">\r\n                                <Link href=\"/forgot-password\">Request New Link</Link>\r\n                            </Button>\r\n                            <Button asChild variant=\"outline\" className=\"w-full\">\r\n                                <Link href=\"/login\">Back to Login</Link>\r\n                            </Button>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4\">\r\n            <Card className=\"w-full max-w-md\">\r\n                <CardHeader className=\"space-y-1\">\r\n                    <CardTitle className=\"text-2xl font-bold text-center\">Reset Password</CardTitle>\r\n                    <CardDescription className=\"text-center\">Enter your new password below</CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <Form {...form}>\r\n                        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"password\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>New Password</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input type=\"password\" placeholder=\"••••••••\" {...field} disabled={isLoading} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"confirmPassword\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Confirm Password</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input type=\"password\" placeholder=\"••••••••\" {...field} disabled={isLoading} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                            <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\r\n                                {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                                Reset Password\r\n                            </Button>\r\n                        </form>\r\n                    </Form>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function ResetPasswordPage() {\r\n    return (\r\n        <Suspense fallback={\r\n            <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n            </div>\r\n        }>\r\n            <ResetPasswordForm />\r\n        </Suspense>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml","AppRouterContext","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1,2,3]}